"use strict";var apiKey="563492ad6f91700001000001efe4554ec5924beab8b1c433b156ab30",findQuery=document.querySelector(".form__input"),findBtn=document.querySelector(".form__button"),gallery=document.querySelector(".gallery__wrapper");function loadImages(e){page+=1;var t="https://api.pexels.com/v1/search?query=".concat(e,"&per_page=18&page=").concat(page);return fetch(t,{headers:{Authorization:apiKey}}).then(function(e){if(e.ok)return e.json();throw new Error("error"+e.statusText)}).then(function(e){return e.photos}).catch(function(e){return console.log(e)})}function appendGallery(e){e.preventDefault();loadImages(findQuery.value).then(function(e){var t=imageMaker(e);gallery.innerHTML+=t})}function imageMaker(e){return e.reduce(function(e,t){return e+'<div class="img-list__imgs"> <img src='.concat(t.src.large," \n    alt=").concat(t.photographer,' class="imgs__item"> </div>')},"")}(btnHidd=document.querySelector(".btn-hidden")).addEventListener("click",appendGallery);apiKey="563492ad6f91700001000001efe4554ec5924beab8b1c433b156ab30",findQuery=document.querySelector(".form__input"),findBtn=document.querySelector(".form__button"),gallery=document.querySelector(".gallery__wrapper");var btnHidd=document.querySelector(".btn-hidden"),page=1;function goApi(e){e.preventDefault();fetchImages(findQuery.value).then(function(e){var t=createImages(e);gallery.innerHTML=t,btnHidd.classList.remove("btn-hidden")})}function fetchImages(e){var t="https://api.pexels.com/v1/search?query=".concat(e,"&per_page=18&page=").concat(page);return fetch(t,{headers:{Authorization:apiKey}}).then(function(e){if(e.ok)return e.json();throw new Error("error"+e.statusText)}).then(function(e){return e.photos}).catch(function(e){return console.log(e)})}function createImages(e){return e.reduce(function(e,t){return e+' <div class="img-list__imgs"> <img src='.concat(t.src.large," alt=").concat(t.photographer,' class="imgs__item"> </div>')},"")}findBtn.addEventListener("click",goApi);var favBtn=document.querySelector(".header__nav"),favList=document.querySelector(".fav-hidden"),container=document.querySelector(".favorites-gallery__img-list"),galleryList=document.querySelector(".gallery"),addFav=document.querySelector(".modal-favorite");function createElementGlobal(){var e=document.createElement("li"),t=document.createElement("img");e.classList.add("img-list__imgs"),t.classList.add("imgs__item"),container.append(e),e.append(t),localStorage.setItem("firstImg",getAttr);var r=localStorage.getItem("firstImg");t.setAttribute("src",r)}function appGallery(e){favList.classList.remove("fav-hidden"),galleryList.classList.add("hide")}favBtn.addEventListener("click",appGallery),addFav.addEventListener("click",createElementGlobal);var LOCALSTORAGE=function(e){if(e){return{isActive:"localStorage"in e,get:function(e){try{var t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(e){console.error("Get state error: ",e)}},set:function(e,t){try{var r=JSON.stringify(t);localStorage.setItem(e,r)}catch(e){console.error("Set state error: ",e)}}}}}(window);function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}var getAttr,modalSection=document.querySelector(".js-modal-backdrop"),modalClose=document.querySelector(".modal-close"),modalPrev=document.querySelector(".modal-prev"),modalNext=document.querySelector(".modal-next"),modalImg=document.querySelector(".modal-img"),favorites=document.querySelector(".favorites-gallery__img-list");function openModal(e){var t=e.target;console.log(t),choosePicture(t),modalSection.classList.remove("modal-hidden"),getAttr=t.getAttribute("src")}function hidd(e){this===e.target&&modalSection.classList.add("modal-hidden")}function choosePicture(e){e.classList.contains("img-list__imgs")?modalImg.src=e.firstElementChild.src:e.classList.contains("imgs__item")&&(modalImg.src=e.src)}function next(){var e=_toConsumableArray(gallery.children);console.log(e),console.log(modalImg.parentElement);for(var t=0;t<e.length;t++)console.log(t)}console.log(modalImg.src),gallery.addEventListener("click",openModal),modalSection.addEventListener("click",hidd),modalClose.addEventListener("click",hidd),modalNext.addEventListener("click",next),favorites.addEventListener("click",openModal);